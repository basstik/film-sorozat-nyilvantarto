<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      >
    <!--    Important put this code in the web.xml
        <context-param>
            <param-name>javax.faces.FACELETS_SKIP_COMMENTS</param-name>
        <   param-value>true</param-value>
        </context-param>
    -->
    <h:head>
        <title>Series edit site</title>
        <style type="text/css">
            .ui-orderlist-list {
                list-style-type: none;
                margin: 0;
                padding: 0;
                overflow:auto;
                height:200px;
                width:100%;
            }
        </style>

    </h:head>
    <h:body>
        <f:metadata>
            <f:viewParam name="id" value="#{seriesEdit.series.id}" />
            <!--                         required="true" requiredMessage="Bad request, please use a link from within the system."-->

        </f:metadata>

        <h:form>
            <div class="ui-grid ui-grid-responsive">
                <div class="ui-grid-row">
                    <div class="ui-grid-col-1"> </div>
                    <div class="ui-grid-col-7"> 
                        <h:panelGrid columns="2" cellpadding="20" style="margin-top:60px">
                            <!--Series name-->
                            <p:outputLabel value="Series name: "/>
                            <p:inputText id="name" value="#{seriesEdit.series.title}"
                                         title="Examples: &#13; -Szökés &#13; -Spongy Bob"/>

                            <!--Release date-->
                            <p:outputLabel value="Release date of serie: " />
                            <p:calendar id="date" value="#{seriesEdit.series.yearOfRelease}" pattern="dd/MM/yyyy" readonlyInput="true" 
                                        navigator="true" mindate="01/01/1920" maxdate="31/12/2010" yearRange="c-100:c+100"
                                        title="Format: dd/MM/yyyy" />
                        </h:panelGrid>
                    </div>
                    <div class="ui-grid-col-4">
                        <!--Picture-->
                        <h:panelGrid cellpadding="20" style="margin-top:20px">
                            <p:fileUpload id="upload" mode="simple" skinSimple="true" fileUploadListener="#{seriesEdit.imageUpload}" update="gi" auto="true"/>
                            <p:graphicImage id="gi" value="#{seriesEdit.image}" width="230" height="180" cache="false"/>
                        </h:panelGrid>
                    </div>
                </div>
            </div>


            <div class="ui-grid ui-grid-responsive">
                <div class="ui-grid-row">
                    <div class="ui-grid-col-4">4</div>
                    <div class="ui-grid-col-4">4</div>
                    <div class="ui-grid-col-4">4</div>
                </div>
            </div>

            <div class="ui-grid ui-grid-responsive">
                <div class="ui-grid-row">
                    <div class="ui-grid-col-4">2</div>
                    <div class="ui-grid-col-4">2</div>
                    <div class="ui-grid-col-4">2</div>

                    <div class="ui-grid-col-4">2</div>
                    <div class="ui-grid-col-4">2</div>
                    <div class="ui-grid-col-4">2</div>
                </div>
            </div>



            <p:separator />


            <!--List actors, directors, and seasons-->
            <div class="ui-grid ui-grid-responsive">
                <div class="ui-grid-row">
                    <div class="ui-grid-col-4">
                        <!--Add Actor-->
                        <h3 style="margin-top: 0">Actor</h3>
                        <p:growl id="msgs" showDetail="true" />
                        <p:orderList value="#{seriesEdit.actorList}" id="actorListId" var="actorVar" itemLabel="#{actorVar}" itemValue="#{actorVar}" controlsLocation="none">
                            <p:ajax event="select" listener="#{seriesEdit.onSelect}" update="msgs"/>
                            <p:ajax event="unselect" listener="#{seriesEdit.onUnselect}" update="msgs"/>
                            <p:ajax event="reorder" listener="#{seriesEdit.onReorder}" update="msgs"/>

                            <f:facet name="actors">Actors</f:facet>


                            <!--Actor title-->
                            <p:column style="width:50px">
                                <p:link outcome="#{seriesEdit.goToActorEditSite()}" value="#{actorVar.name}">
                                    <f:param name="actorId" value="#{actorVar.id}" />
                                </p:link>
                            </p:column>

                            <!--Edit actor button-->
                            <p:column style="width:50px">
                                <p:button  outcome="#{seriesEdit.goToActorEditSite()}" icon="ui-icon-edit">
                                    <f:param name="actorId" value="#{actorVar.id}" />
                                </p:button>
                            </p:column>

                            <!--Remove actor button-->
                            <p:column style="width:50px">
                                <p:commandButton action="#{seriesEdit.removeActorFromSeries}" update="actorListId" icon="ui-icon-trash" title="Remove" />
                            </p:column>


                        </p:orderList>

                        <!-- Dropdown  actor list -->
                        <h:panelGrid columns="2" cellpadding="5">
                            <!--<h:outputLabel for="btnSelect" value="Add:" />-->
                            <p:selectOneMenu id="btnSelect" value="#{seriesEdit.actor}" onchange="$('#form').submit()">
                                <f:selectItem itemLabel="Choose Actor" itemValue="" />
                                <f:selectItems value="#{seriesEdit.actorList}" />
                            </p:selectOneMenu>
                            <p:commandButton action="#{seriesEdit.goToActorEditSite()}" value="Add" id="addBtn" icon="ui-icon-add" title="Add" />
                        </h:panelGrid>

                    </div>
                </div>
            </div>




            <!--Description panel-->
            <p:outputPanel id="containmentPanel" layout="block" style="width:400px;height:200px;border:2px solid black;">
                <p:panel id="containment" header="Containment" style="margin:0">
                    Description
                </p:panel>
                <p:resizable for="containment" containment="true"/>
            </p:outputPanel>






        </h:form>
    </h:body>
</html>