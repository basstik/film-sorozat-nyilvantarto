<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      >
    <!--    Important put this code in the web.xml
        <context-param>
            <param-name>javax.faces.FACELETS_SKIP_COMMENTS</param-name>
        <   param-value>true</param-value>
        </context-param>
    -->
    <h:head>
        <title>Series edit site</title>
        <style type="text/css">
            .ui-orderlist-list {
                list-style-type: none;
                margin: 0;
                padding: 0;
                overflow:auto;
                height:200px;
                width:100%;
            }

            .ui-fileupload-content {
                display: none;
            }
            .ui-fileupload-buttonbar.ui-widget-header {
                background-color: transparent;
                border: 0 none;
            }
            .absoluteCenter {
                /* Must manually set width/height */
                width:800px;
                height:500px;

                /* The magic centering code */
                margin:auto;
                position:absolute;
                top:0;bottom:0; /* Aligns Vertically - Remove for Horizontal Only */
                left:0;right:0; /* Aligns Horizontally - Remove for Vertical Only  */

                /* Prevent div from overflowing main window */
                max-width:100%;
                max-height:100%;
                overflow:auto;
            }
            .centre{
                width: 200px;
                margin-left: auto;
                margin-right: auto;
                text-align: center
            }
            .mydiv {
                width: 200px; 
                margin: 0 auto;
                text-align: center
            }

        </style>

    </h:head>
    <h:body>


        <h:form id="mainId">
            <div class="ui-grid ui-grid-responsive">
                <div class="ui-grid-row">
                    <div class="ui-grid-col-1"> </div>
                    <div class="ui-grid-col-6"> 
                        <h:panelGrid columns="2" cellpadding="20" style="margin-top:60px">
                            <!--Series name-->
                            <p:outputLabel value="Series name: "/>
                            <p:inputText id="name" value="#{seriesEdit.series.title}"
                                         title="Examples: &#13; -Szökés &#13; -Spongy Bob"/>

                            <!--Release date-->
                            <p:outputLabel value="Release date of serie: " />
                            <p:calendar id="date" value="#{seriesEdit.series.yearOfRelease}" pattern="dd/MM/yyyy" readonlyInput="true" 
                                        navigator="true" mindate="01/01/1920" maxdate="31/12/2010" yearRange="c-100:c+100"
                                        title="Format: dd/MM/yyyy" />
                        </h:panelGrid>
                    </div>
                    <div class="ui-grid-col-5">
                        <!--Picture-->
                        <h:panelGrid columns="2" cellspacing="0">
                            <p:fileUpload id="upload" mode="advanced" skinSimple="true" fileUploadListener="#{seriesEdit.imageUpload}" update="gi" auto="true"/>
                            <p:commandButton value="Reset">
                                <p:ajax listener="#{seriesEdit.resetPicture}" update="gi"/>
                            </p:commandButton>  
                            <p:graphicImage id="gi" value="#{seriesEdit.image}" width="230" height="180" cache="false"/>
                        </h:panelGrid> 
                        <!--<p:outputLabel value="Picture: "/>-->

                    </div>
                </div>
            </div>

            <p:separator />
            <div class="ui-grid ui-grid-responsive">
                <div class="ui-grid-row">
                    <div class="ui-grid-col-4">
                        4
                    </div>
                    <div class="ui-grid-col-4">
                        4
                    </div>
                    <div class="ui-grid-col-4">
                        4
                    </div>
                </div>
            </div>

            <!--List actors, directors, and seasons-->
            <div class="ui-grid ui-grid-responsive">
                <div class="ui-grid-row">
                    <!--<div class="ui-grid-col-4" style="margin-left:50px">-->
                    <div class="ui-grid-col-4">


                        <p:dataTable id="actorListId" var="actorVar" value="#{seriesEdit.actorList}">
                            <!--Actor title-->
                            <p:column>
                                <p:link outcome="actorEdit.xhtml" value="#{actorVar.name}">
                                    <f:param name="actorId" value="#{actorVar.id}" />
                                </p:link>
                            </p:column>

                            <!--Edit actor button-->
                            <p:column style="width:35px;">
                                <p:commandButton  action="#{seriesEdit.goToActorEditSite()}" icon="ui-icon-edit" title="Edit">
                                    <f:param name="actorId" value="#{actorVar.id}" />
                                </p:commandButton>
                            </p:column>

                            <!--Remove actor button-->
                            <p:column style="width:35px;">
                                <p:commandButton icon="ui-icon-trash" title="Remove"   
                                                 action="#{seriesEdit.removeActorFromSeries(actorVar)}" update="actorListId">
                                </p:commandButton>
                            </p:column>




                        </p:dataTable>
                           
                        <h:panelGrid columns="2" cellpadding="10">
                            <p:selectOneMenu  id="btnSelect" value="#{seriesEdit.actorId}" >
                                <f:selectItem itemLabel="Choose Actor" itemValue="#{null}" />
                                <f:selectItems value="#{seriesEdit.actorListNotInSeries}" var="actorVar" itemLabel="#{actorVar.name}" itemValue="#{actorVar.id}"/>
                                <p:ajax event="change" update="@this" />
                            </p:selectOneMenu>
                            
                            <p:commandButton value="Add" icon="ui-icon-add" title="Add"
                                             action="#{seriesEdit.addActorToSeries}" />
                        </h:panelGrid>
                        
                        <!--</h:form>-->

                    </div>
                    <div class="ui-grid-col-4">
                        2
                    </div>
                    <div class="ui-grid-col-4">
                        3
                    </div>                                                    
                </div>
            </div>

            <p:separator />

            <!--Description panel-->
            <h:panelGrid style="margin:0 auto">
                <h:outputText value="Desctiption" />
                <p:inputTextarea rows="10" cols="100" value="#{seriesEdit.series.description}" 
                                 queryDelay="750" minQueryLength="4" />

            </h:panelGrid>




        </h:form>
    </h:body>
</html>